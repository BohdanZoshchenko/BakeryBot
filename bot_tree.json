{
    "description" : "Bot JSON chat tree",
    "for_customer" : "Mari_Ko Bakery Club",

    "database" : 
    {
        "delete_client_table" : "DROP TABLE client",
        "set_admin_on" : "UPDATE admin SET admin_on = %s WHERE  user_id = %s",
        "get_admin_on" : "SELECT admin_on FROM admin WHERE user_id = %s",
        "set_keyboard_created" : "UPDATE admin SET keyboard_created = %s WHERE  user_id = %s",
        "get_keyboard_created" : "SELECT keyboard_created FROM admin WHERE user_id = %s",
        "create_tables" :
        [
            "CREATE TABLE IF NOT EXISTS admin (user_id integer NOT NULL, admin_on boolean NULL, keyboard_created boolean NULL)",
            
            "CREATE TABLE IF NOT EXISTS promotion (name varchar NOT NULL, text varchar NOT NULL, photos bytea[] NULL)",
            
            "CREATE TABLE IF NOT EXISTS client (chat_id integer NOT NULL, level varchar NULL, funnel varchar NULL, params varchar[] NULL, PRIMARY KEY (chat_id))",
    
            "CREATE TABLE IF NOT EXISTS item (name varchar(45) NOT NULL, description varchar(450) NOT NULL, photo bytea NOT NULL, price integer NOT NULL DEFAULT '450')",
            
            "CREATE TABLE IF NOT EXISTS client_order (client_id integer NOT NULL, description varchar NOT NULL, photo bytea)"
        ],

        "set_user_state" : "INSERT INTO client VALUES(%s,%s,%s,%s) ON CONFLICT (chat_id) DO UPDATE SET level = %s, funnel = %s, params = %s",
        "get_user_state" : "SELECT level, funnel, params FROM client WHERE chat_id = %s",
        "get_admins" : "SELECT * FROM admin"
    },

    "params":
    {
        "telegram_token" : "1793479610:AAFJBhZAGwlVbddGk-qt4dGHvEnpDn3R5C0",
        "admin_password" : "_VpuVq`8tZy&M9_2",

        "server_port" : 33507,
        "url" : "https://bakerybotmariko.herokuapp.com/",

        "database" :
        {
            "development" :
            {
                "host" : "localhost",
                "database" : "python_test", 
                "user" : "objectrocket",
                "port" : 5432,
                "password" : "mypass"
            },

            "production" :
            {
                "host" : "ec2-54-220-35-19.eu-west-1.compute.amazonaws.com",
                "database" : "d9a5qf332rvd60", 
                "user" : "svcsvcnqpcihzf",
                "port" : 5432,
                "password" : "d24a90027d702d66f15d5b4eb658eecb672b202d0af5934f82b3aa933373371a"
            }
        },
        
        "instagram_link" : "https://www.instagram.com/mari_ko_bakeryclub/",
        "instagram_login_credentials" : 
        {
            "login" : "",
            "password" : ""
        }
    },
    "admin" :
    {
        "start" : 
        {

        }
    },

    "user" :
    {
        "unknown_input" : 
        {
            "text" : "–Ø –≤–∞—Å –Ω–µ —Ä–æ–∑—É–º—ñ—éüòï –°–ø—Ä–æ–±—É–π—Ç–µ —è–∫–æ—Å—å —ñ–Ω–∞–∫—à–µ.",
            "inline_buttons" : [[["–°–ø—Ä–æ–±—É–≤–∞—Ç–∏", "new_greeting"]]]
        },

        "funnel_unknown_input" : "–°—Ç–∞–ª–∞—Å—å —è–∫–∞—Å—å –ø–æ–º–∏–ª–∫–∞üòï –î–∞–≤–∞–π—Ç–µ —Å–ø—Ä–æ–±—É—î–º–æ —â–µ",

        "recent_post_title" : "üì∞–°–≤—ñ–∂–∞ –Ω–æ–≤–∏–Ω–∞üì∞\nüÜï–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ —Ü–µ–π —Ç–µ–∫—Å—ÇüÜï",
        "on_user_distracted" : "–©–æ—Å—å –º–∏ –≤—ñ–¥–≤–æ–ª—ñ–∫–ª–∏—Å—è üòÖ",

        "simple_gotos" :
        {
            "start" :
            {
                "text" : "–ü—Ä–∏–≤—ñ—Ç üëãüòä, —è –±–æ—Ç ü§ñ –∫–æ–Ω–¥–∏—Ç–µ—Ä—Å—å–∫–æ—ó üç∞üéÇüßÅ Mari_Ko Bakery Club üï∂Ô∏è! –ß–æ–≥–æ –±–∞–∂–∞—î—Ç–µ üßû?",
                "inline_buttons" : 
                [
                    [ ["–ó–∞–º–æ–≤–∏—Ç–∏ —Å–º–∞–∫–æ–ª–∏–∫–∏", "order"] ],
                    [ ["–Ü–Ω—Ñ–æ", "info_in_telegram"] ]
                ]
            }
        },
        
        "commands" :
        {
            "start" : 
            {
                "goto" : "start"
            },
            "help" : 
            {
                "goto" : "start"
            }
        },
        
        "simple_buttons" :
        [
            [ ["–ü–æ—á–∞—Ç–∏", "start" ] ]
        ],
        
        "simple_callbacks" :
        {
            "info_in_messenger" :
            {

            },

            "info_in_telegram" :
            {
                "text" : "–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —Ç–µ—Ä–º—ñ–Ω –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è:\n–¢–æ—Ä—Ç/—á–∏–∑–∫–µ–π–∫ - 6-7 –¥–Ω—ñ–≤\n–ö–∞–ø–∫–µ–π–∫–∏ - 4-5 –¥–Ω—ñ–≤\n–ë—Ä–æ–Ω—é–≤–∞–Ω–Ω—è –∑–¥—ñ–π—Å–Ω—é—î—Ç—å—Å—è –ø—ñ—Å–ª—è —É—Ç–æ—á–Ω–µ–Ω–Ω—è:\n-–¥–∞—Ç–∏ —Ç–∞ —á–∞—Å—É\n-–≤–∞–≥–∏ —Ç–∞ –Ω–∞—á–∏–Ω–∫–∏\n-–¥–µ–∫–æ—Ä—É\n–ø–µ—Ä–µ–¥–æ–ø–ª–∞—Ç–∏ 50 –≤—ñ–¥—Å–æ—Ç–∫—ñ–≤ –≤—ñ–¥ –≤–∞—Ä—Ç–æ—Å—Ç—ñ –≤–∏—Ä–æ–±—É\n–î–ï–ö–û–† –û–ü–õ–ê–ß–£–Ñ–¢–¨–°–Ø –û–ö–†–ï–ú–û\n–î–û–°–¢–ê–í–ö–ê - –°–ê–ú–û–í–ò–í–Ü–ó/ –¢–ê–ö–°–Ü\n–ó –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –ø–∏—Ç–∞–Ω—å –ø–∏—à—ñ—Ç—å –∫–æ–Ω–¥–∏—Ç–µ—Ä—Ü—ñ –ú–∞—Ä—ñ—ó ****** –∞–±–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É–π—Ç–µ —ó–π ******",
                "inline_buttons":[[["–ù–∞–∑–∞–¥", "new_greeting"]]]
            },

            "order" :
            {
                "description" : "Create buttons from DB items entries",
                "sql" : "SELECT name, price FROM item ORDER BY price",
                "func" : "show_items"
            },

            "new_greeting" :
            {
                "text" : "–•–æ—á–µ—Ç–µ —Å–º–∞–∫–æ–ª–∏–∫—ñ–≤ üßû?",
                "inline_buttons" : 
                [
                    [ ["–ó–∞–º–æ–≤–∏—Ç–∏ —Å–º–∞–∫–æ–ª–∏–∫–∏", "order"] ],
                    [ ["–Ü–Ω—Ñ–æ", "info_in_telegram"] ]
                ]
            }
        },
        
        "composite_callbacks" :
        {
            "show_item" : 
            {
                "sql" : "SELECT name, description, photo, price FROM item WHERE name=%s",
                "func" : "show_single_item"
            },
            "order" :
            {
                "funnel" : "order_item"
            }
        },
        "funnels" :
        {
            "order_info" :
            {
                "0" : 
                {
                    "input_type" : "text",
                    "text" : "–í–∫–∞–∂—ñ—Ç—å –¥–∞—Ç—É –π —á–∞—Å, –∫–æ–ª–∏ —Ö–æ—á–µ—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è.\n–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —Ç–µ—Ä–º—ñ–Ω –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è:\n–¢–æ—Ä—Ç/—á–∏–∑–∫–µ–π–∫ - 6-7 –¥–Ω—ñ–≤\n–ö–∞–ø–∫–µ–π–∫–∏ - 4-5 –¥–Ω—ñ–≤"
    
                }, 
                "1" : 
                {
                    "input_type" : "text",
                    "text" : "–¢–µ–ø–µ—Ä –¥–∞–π—Ç–µ —Å–≤—ñ–π –Ω–æ–º–µ—Ä –¥–ª—è –∑–≤'—è–∑–∫—É"
                },
                "2" :
                {
                    "input_type" : "text",
                    "text" : "–ù–∞–æ—Å—Ç–∞–Ω–æ–∫, —è–∫ –≤–∞—Å –∑–≤—É—Ç—å?",
                    "func" : "finish_order"
                }
            },

            "order_item" :
            {
                "0" :
                {
                    "func" : "order_item_start"
                },
                "1" : 
                {
                    "sql" : "SELECT price FROM item WHERE name=%s",
                    "func" : "order_item_mass",

                    "errors":
                    {
                        "too_little" : "–ó–∞–º–∞–ª–∞ –≤–∞–≥–∞. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ",
                        "too_big" : "–î—É–∂–µ –≤–µ–ª–∏–∫–∞ –≤–∞–≥–∞. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ",
                        "type_mismatch" : "–Ø –±–æ—Ç, —Ç–æ–º—É –∑—Ä–æ–∑—É–º—ñ—é —Ç—ñ–ª—å–∫–∏ —á–∏—Å–ª–æ. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, 2.5"
                    },
                    
                    "input_type" : "float",
                    "min" : 2,
                    "max" : 102,
                    "after_comma" : 2
                }
            }
        }
    }
}