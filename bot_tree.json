{
    "description" : "Bot JSON chat tree",
    "for_customer" : "Mari_Ko Bakery Club",

    "database" : 
    {
        "drop_client_table" : "DROP TABLE client",
        "create_tables" :
        [
            "CREATE TABLE IF NOT EXISTS client (chat_id integer NOT NULL, level varchar NULL, funnel varchar NULL, params varchar[] NULL, PRIMARY KEY (chat_id))",

            "CREATE TABLE IF NOT EXISTS category (price integer NOT NULL DEFAULT '450', PRIMARY KEY (price))",
    
            "CREATE TABLE IF NOT EXISTS item (name varchar(45) NOT NULL, description varchar(450) NOT NULL, photo bytea NOT NULL, price integer NOT NULL DEFAULT '450')",
            
            "CREATE TABLE IF NOT EXISTS client_order (client_id integer NOT NULL, description varchar NOT NULL, photo bytea)"
        ],

        "set_user_state" : "INSERT INTO client VALUES(%s,%s,%s,%s) ON CONFLICT (chat_id) DO UPDATE SET level = %s, funnel = %s, params = %s",
        "get_user_state" : "SELECT level, funnel, params FROM client WHERE chat_id = %s"
    },

    "params":
    {
        "telegram_token" : "1793479610:AAFJBhZAGwlVbddGk-qt4dGHvEnpDn3R5C0",
        "admin_password" : "_VpuVq`8tZy&M9_2",

        "server_port" : 33507,
        "url" : "https://bakerybotmariko.herokuapp.com/",

        "database" :
        {
            "development" :
            {
                "host" : "localhost",
                "database" : "python_test", 
                "user" : "objectrocket",
                "port" : 5432,
                "password" : "mypass"
            },

            "production" :
            {
                "host" : "ec2-54-220-35-19.eu-west-1.compute.amazonaws.com",
                "database" : "d9a5qf332rvd60", 
                "user" : "svcsvcnqpcihzf",
                "port" : 5432,
                "password" : "d24a90027d702d66f15d5b4eb658eecb672b202d0af5934f82b3aa933373371a"
            }
        },
        
        "instagram_link" : "https://www.instagram.com/mari_ko_bakeryclub/",
        "instagram_login_credentials" : 
        {
            "login" : "",
            "password" : ""
        }
    },

    "main" :
    {
        "unknown_input" : 
        {
            "text" : "–Ø –≤–∞—Å –Ω–µ —Ä–æ–∑—É–º—ñ—éüòï –°–ø—Ä–æ–±—É–π—Ç–µ —è–∫–æ—Å—å —ñ–Ω–∞–∫—à–µ.",
            "inline_buttons" : [[["–°–ø—Ä–æ–±—É–≤–∞—Ç–∏", "new_greeting"]]]
        },
        "recent_post_title" : "üì∞–°–≤—ñ–∂–∞ –Ω–æ–≤–∏–Ω–∞üì∞\nüÜï–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ —Ü–µ–π —Ç–µ–∫—Å—ÇüÜï",
        "on_user_distracted" : "–©–æ—Å—å –º–∏ –≤—ñ–¥–≤–æ–ª—ñ–∫–ª–∏—Å—è üòÖ",

        "simple_gotos" :
        {
            "start" :
            {
                "text" : "–ü—Ä–∏–≤—ñ—Ç üëãüòä, —è –±–æ—Ç ü§ñ –∫–æ–Ω–¥–∏—Ç–µ—Ä—Å—å–∫–æ—ó üç∞üéÇüßÅ Mari_Ko Bakery Club üï∂Ô∏è! –ß–æ–≥–æ –±–∞–∂–∞—î—Ç–µ üßû?",
                "inline_buttons" : 
                [
                    [ ["–ó–∞–º–æ–≤–∏—Ç–∏ —Å–º–∞–∫–æ–ª–∏–∫–∏", "order"] ],
                    [ ["–Ü–Ω—Ñ–æ", "info_in_telegram"] ]
                ]
            }
        },
        
        "commands" :
        {
            "start" : 
            {
                "goto" : "start"
            },
            "help" : 
            {
                "goto" : "start"
            }
        },
        
        "simple_buttons" :
        [
            [ ["–ü–æ—á–∞—Ç–∏", "start" ] ]
        ],
        
        "simple_callbacks" :
        {
            "info_in_messenger" :
            {

            },

            "info_in_telegram" :
            {
                "text" : "–ó –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –ø–∏—Ç–∞–Ω—å –ø–∏—à—ñ—Ç—å –∫–æ–Ω–¥–∏—Ç–µ—Ä—Ü—ñ –ú–∞—Ä—ñ—ó @MariaYav",
                "inline_buttons":[[["–ù–∞–∑–∞–¥", "new_greeting"]]]
            },

            "order" :
            {
                "description" : "Create buttons from DB items entries",
                "sql" : "SELECT name, price FROM item ORDER BY price",
                "func" : "show_items"
            },

            "new_greeting" :
            {
                "text" : "–•–æ—á–µ—Ç–µ —Å–º–∞–∫–æ–ª–∏–∫—ñ–≤ üßû?",
                "inline_buttons" : 
                [
                    [ ["–ó–∞–º–æ–≤–∏—Ç–∏ —Å–º–∞–∫–æ–ª–∏–∫–∏", "order"] ],
                    [ ["–Ü–Ω—Ñ–æ", "info_in_telegram"] ]
                ]
            }
        },
        
        "composite_callbacks" :
        {
            "show_item" : 
            {
                "sql" : "SELECT name, description, photo, price FROM item WHERE name=%s",
                "func" : "show_single_item"
            },
            "order" :
            {
                "funnel" : "order"
            }
        },
        "funnels" :
        {
            "order_item" :
            {
                "1" :
                {
                    "func" : "order_item1"
                },

                "2" : 
                {
                    "unknown_input" : "–ù–µ —Ä–æ–∑—É–º—ñ—é üòï",
                    "less_than_min" : "–ó–∞–º–∞–ª–∞ –≤–∞–≥–∞. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ",
                    "more_than_max" : "–î—É–∂–µ –≤–µ–ª–∏–∫–∞ –≤–∞–≥–∞. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ",
                    "type_mismatch" : "–Ø –±–æ—Ç, —Ç–æ–º—É –∑—Ä–æ–∑—É–º—ñ—é —Ç—ñ–ª—å–∫–∏ —á–∏—Å–ª–æ. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, 2.5",
                    "input_type" : "float",
                    "min" : 2,
                    "max" : 102,
                    "after_comma" : 2,
                    "text" : "–î–æ–±—Ä–µ!"
                }
            }
        }
    }
}